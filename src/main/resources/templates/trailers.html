<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Meta tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS (Temporally location)-->
    <link type="text/css" rel="stylesheet" href="/styles/css/styles.css">

    <!-- Customize css -->
    <link type="text/css" rel="stylesheet" href="/styles/css/customize__navbar.css">
    <link type="text/css" rel="stylesheet" href="/styles/css/customize__trailer-preview.css">

    <!-- Header styles -->
    <link rel="icon" href="/resources/icons/main_icon.ico">
    <title th:text="${title}">...</title>

</head>
<body>

    <!-- Nav header -->
    <header th:replace="/fragments/navbar :: navbar_header"></header>

    <main class="container mt-4 mt-lg-5 overflow-hidden">
        <div class="row gy-3 gx-5">
            <!-- Filter -->
            <aside class="col-lg-3 text-light d-grid">

                <!-- Accordion -->
                <div class="accordion accordion-flush" id="accordionFlushFilter">

                    <!-- Header Filter -->
                    <div class="bg-secondary rounded">
                        <p class="h4 p-3 text-center" style="height: 100%;">Filter</p>
                    </div>

                    <!-- Genre Filter -->
                    <div class="accordion-item">
                        <!-- Header -->
                        <h2 class="accordion-header" id="flush-genres">
                            <button class="accordion-button collapsed" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#flush-collapseGenres" 
                                    aria-expanded="false" aria-controls="flush-collapseGenres">
                                Por GÃ©nero
                            </button>
                        </h2>
                        <!-- Collapse -->
                        <div id="flush-collapseGenres" class="accordion-collapse collapse" 
                            aria-labelledby="flush-genres" data-bs-parent="#accordionFlushFilter">
                            <div class="accordion-body">

                                <!-- Genres Each  -->
                                <div th:each=" genre : ${genresList}"
                                    class="form-check">
                                    <input th:value="${genre.getNameGenre.toLowerCase()}" 
                                        th:id="check + ${genre.getNameGenre}"
                                        class="form-check-input" type="checkbox" >
                                    <label th:text="${genre.getNameGenre}"
                                        th:for="check + ${genre.getNameGenre}"
                                        class="form-check-label" >
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Audio Filter -->
                    <div class="accordion-item">
                        <!-- Header -->
                        <h2 class="accordion-header" id="flush-audio">
                            <button class="accordion-button collapsed" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#flush-collpaseAudio" 
                                    aria-expanded="false" aria-controls="flush-collpaseAudio">
                                Por Audio
                            </button>
                        </h2>
                        <!-- Collapse -->
                        <div id="flush-collpaseAudio" class="accordion-collapse collapse" 
                            aria-labelledby="flush-audio" data-bs-parent="#accordionFlushFilter">
                            <div class="accordion-body">

                                <!-- Audio Each  -->
                                <div th:each=" audio : ${languagesList}"
                                    th:if="${ audio.getIdLanguage != '0' }"
                                    class="form-check">
                                    <input th:value="${audio.getNameLanguage.toLowerCase()}" 
                                        th:id="check + ${audio.getNameLanguage}"
                                        class="form-check-input" type="checkbox" >
                                    <label th:text="${audio.getNameLanguage}"
                                        th:for="check + ${audio.getNameLanguage}"
                                        class="form-check-label" >
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Subtitle Filter -->
                    <div class="accordion-item">
                        <!-- Header -->
                        <h2 class="accordion-header" id="flush-subtitle">
                            <button class="accordion-button collapsed" type="button" 
                                    data-bs-toggle="collapse" data-bs-target="#flush-collapseSubtitle" 
                                    aria-expanded="false" aria-controls="flush-collapseSubtitle">
                                Por Subtitulos
                            </button>
                        </h2>
                        <!-- Collapse -->
                        <div id="flush-collapseSubtitle" class="accordion-collapse collapse" 
                            aria-labelledby="flush-subtitle" data-bs-parent="#accordionFlushFilter">
                            <div class="accordion-body">

                                <!-- Subtitle Each  -->
                                <div th:each=" subtitle : ${languagesList}"
                                    th:if="${ subtitle.getIdLanguage != '0' }"
                                    class="form-check">
                                    <input th:value="${subtitle.getNameLanguage.toLowerCase()}" 
                                        th:id="check + ${subtitle.getNameLanguage}"
                                        class="form-check-input" type="checkbox" >
                                    <label th:text="${subtitle.getNameLanguage}"
                                        th:for="check + ${subtitle.getNameLanguage}"
                                        class="form-check-label" >
                                    </label>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Trailers -->
            <div class="col-lg-9">
                <div class="row row-cols-2 row-cols-sm-3 row-cols-lg-4 row-cols-xxl-5 pt-1">

                    <!-- Trailers Divs-->
                    <div th:each="trailer : ${trailersList}" 
                        class="col px-3 py-1 c_link-video-container">

                        <a th:href="@{/app/trailer/view/{id}(id=${trailer.getId}) }"
                            th:title="${trailer.getTitle}" 
                            th:data-bs-content-id="${ 'popover' + trailer.getId}" 
                            tabindex="0" data-bs-toggle="popover" data-bs-placement="left" 
                            data-bs-trigger="hover focus">

                            <div class="position-relative overflow-hidden rounded-3">
                                <!-- Image -->
                                <img th:src="@{${ 'http://i.ytimg.com/vi/' + trailer.getId + '/mqdefault.jpg' }}" 
                                    th:alt="${ 'Imagen del trailer: ' + trailer.getTitle }" class="w-100 c_img-video">
                                <!-- Icons Language -->
                                <div class="position-absolute top-0 end-0 p-2 d-flex rounded-3 c_languageInfo">
                                    <!-- Audio Icon -->
                                    <div th:if="${ trailer.getLanguage.getIdLanguage != '0' }"
                                        class="d-flex">
                                        <img src="/resources/icons/volume__icon.svg" 
                                            alt="Icono de audio" class="me-1"> 
                                        <img th:src="${ trailer.getLanguage.getIconLanguage }" 
                                            th:alt="${ 'Icono de audio ' + trailer.getLanguage.getNameLanguage.toLowerCase() }" 
                                            style="height: 100%;">
                                    </div>
                                    <!-- Subtitle Icon -->
                                    <div th:if="${ trailer.getSubtitle.getIdLanguage != '0' }"
                                        class="d-flex ms-2">
                                        <img src="/resources/icons/subtitle__icon.svg" 
                                            alt="Icono de subtitulo" class="me-1"> 
                                        <img th:src="${ trailer.getSubtitle.getIconLanguage }"
                                            th:alt="${ 'Icono de subtitulos en ' + trailer.getSubtitle.getNameLanguage.toLowerCase() }" 
                                            style="height: 100%;">
                                    </div>
                                </div>
                            </div>
                            <p th:text="${ trailer.getTitle }"
                                class="text-truncate"></p>
                        </a>

                        <!-- Popover -->
                        <div th:id="${ 'popover' + trailer.getId}" class="d-none">
                            <div class="row justify-content-center px-1">
                                <div th:each="genre : ${ trailer.getMovie.getGenreList }"
                                    th:text="${ genre.getNameGenre }"
                                    class="col-auto bg-secondary text-light rounded-pill m-1"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-5 pb-5 text-light text-center ">
        Copyright &copy; Trailers web 2022
        <div class="mt-1">
            <a href="#" style="text-decoration: none;">
                <img src="/resources/icons/facebook.svg" alt="Link a facebook">
            </a>
            <a href="#" style="text-decoration: none;">
                <img src="/resources/icons/twitter.svg" alt="Link a twitter">
            </a>
            <a href="#" style="text-decoration: none;">
                <img src="/resources/icons/instagram.svg" alt="Link a instagram">
            </a>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="/utils/popper.min.js"></script>
    <script src="/utils/bootstrap.js"></script>
    <!-- Enable tooltips -->
    <script src="/utils/enablePopovers.js"></script>

    <!-- Customm Js -->
    <script src="/utils/autoadjust_16-9__video-proportions.js"></script>
</body>
</html>